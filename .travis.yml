language: python
python:
- '3.5'
before_script:
- wget http://ftp.gnu.org/gnu/make/make-4.2.1.tar.gz
- tar -xf make-4.2.1.tar.gz
- cd make-4.2.1
- ./configure --prefix=/usr
- sudo make install
- cd ..
- make deps
script:
- make test
- make deploy
notification:
  email:
    on_success: never
    on_failure: change
before_deploy:
- make pack
deploy:
  provider: releases
  api_key:
    secure: XhLi7LHlfBxK0KvAnvrUNg
  file:
  - "lil-client.zip"
  - "lil-client.tar.gz"
  - "lil-server.zip"
  - "lil-server.tar.gz"
  skip_cleanup: true
  on:
    repo: TheMysteriousVincent/LiveInLife
    tags: true
